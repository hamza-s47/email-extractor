<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email-Extarctor | By Hamza</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: purple;
    }
  </style>
</head>

<body>
  <section class="min-h-screen flex  text-gray-600 body-font overflow-hidden bg-purple-50 my-auto">
    <div class="container px-5 py-24 m-auto">
      <div class="lg:w-4/5 mx-auto flex flex-wrap">
        <div class="lg:w-1/2 w-full lg:pr-10 lg:py-6 mb-6 lg:mb-0">
          <h2 class="text-sm title-font text-gray-500 tracking-widest">EMAILS EXTRACTOR</h2>
          <h1 class="text-gray-900 text-3xl title-font font-medium">Paste Text/URL or Upload File</h1>
          <label for="textToggle" class="switch cursor-pointer relative flex w-[6.7rem] scale-75 overflow-hidden ml-auto px-2 mb-4" onclick="textToUrl()">
            <input type="checkbox" name="" class="peer hidden" id="textToggle"/>
            <div
              class="absolute -right-[6.5rem] z-[1] flex h-12 w-24 skew-x-12 items-center justify-center text-lg duration-500 peer-checked:right-1">
              <span class="-skew-x-12">URL</span>
            </div>
            <div
              class="z-0 h-12 w-24 -skew-x-12 border border-black duration-500 peer-checked:skew-x-12">
            </div>
            <div
              class="absolute left-[0.3rem] flex h-12 w-24 -skew-x-12 items-center justify-center text-lg duration-500 peer-checked:-left-[6.5rem]">
              <span class="skew-x-12">TEXT</span>
            </div>
          </label>

          <textarea class="w-full leading-relaxed mb-2 pl-3 pt-2 focus:outline-none" rows="10" name="" id="textInput"
            placeholder="Enter text to extarct!"></textarea>
          <div class="flex items-center mb-6">
            <input type="file" name="" id="fileInput" accept=".pdf, .docx, .doc, .pptx, .xlsx, .txt" onchange="fileData()">
            <p onclick="document.querySelector('#modal').style.display = 'flex'" class="cursor-pointer ml-auto">*<span class="hover:underline">Guide</span></p>
          </div>
          <div class="flex border-t border-gray-200 py-2">
            <span class="text-gray-500">Text count</span>
            <!-- <span class="ml-auto text-gray-900">1025</span> -->
             <button class="ml-auto text-sm text-white bg-purple-500 px-3 rounded hover:bg-purple-600">Reveal</button>
          </div>
          <div class="flex border-t border-b border-gray-200 py-2 mb-6">
            <span class="text-gray-500">Emails extracted</span>
            <span class="ml-auto text-gray-900">5</span>
          </div>
          <div class="flex">
            <button
              class="flex ml-auto text-white bg-purple-500 border-0 py-2 px-6 focus:outline-none hover:bg-purple-600 rounded-md" onclick="apiCall()">Extract</button>
          </div>
        </div>
        <div
          class="lg:w-1/2 w-full lg:h-[600px] h-64 object-cover object-center rounded border border-black/30 overflow-y-scroll">
          <p class="pl-4 pt-3 text-xl md:text-2xl">No email to show!</p>
          <!-- <ul class="pl-3 pt-2">
                    <li>hamza@email.com</li>
                    <li>sidd@email.com</li>
                    <li>hamza.web24@gmail.com</li>
                </ul> -->
        </div>
      </div>
    </div>
  </section>
  <main class="fixed inset-0 w-full h-screen bg-black/70 hidden justify-center items-center" id="modal">
    <div class="relative rounded-xl px-10 py-8 bg-white">
      <button class="cursor-pointer absolute top-2 right-4 text-lg font-bold hover:scale-110" onclick="document.querySelector('#modal').style.display = 'none'">x</button>
      <h2 class="text-2xl font-bold mb-2">Files you can upload:</h2>
      <ul>
        <li>PDF (.pdf)</li>
        <li>WORD (.docx, .doc)</li>
        <li>POWER POINT (.pptx)</li>
        <li>EXCEL (.xlsx)</li>
        <li>NOTE PAD (.txt)</li>
      </ul>
    </div>
  </main>
  <script>
    textToggle = document.querySelector('#textToggle');
    textInput = document.querySelector('#textInput');
    fileInput = document.querySelector('#fileInput');

    emailResponse = '';

    function textToUrl(){
      textToggle.checked ? textInput.placeholder = 'Enter url to extract' : textInput.placeholder = 'Enter text to extract'
    }

    function fileData(){
      console.warn(fileInput.files[0].mozFullPath);
    }
    

    // API CALL
    async function apiCall() {
      data = {
        content:"test",
        type:"url"
      }
      try{
        const response = await fetch('/api/extract', {
          method:'POST',
          headers:{
            'Content-Type':'application/json'
          },
          body:JSON.stringify(data)
        });
        
        const responseData = await response;
        responseData.json().then(res=>{
          console.warn(res);
        });

        alert("suucess");
        
      } catch (err){
        console.error("ERROR POSTING DATA", err);
      }
      
    }
  </script>
</body>

</html>